//backend/ ecosystem.config.cjs


module.exports = {
  apps: [
    {
      name: 'backend-api',
      script: 'server.js',
      cwd: '/root/admin-pannel/admin-panel/backend',
      instances: 1,
      autorestart: true,
      watch: false,
      max_memory_restart: '1G',
      env: {
        NODE_ENV: 'production',
        PORT: 5000
      },
      error_file: '/root/admin-pannel/logs/backend-error.log',
      out_file: '/root/admin-pannel/logs/backend-out.log',
      time: true
    },
    {
      name: 'frontend',
      script: 'serve',
      args: '-s build -l 3000',
      cwd: '/root/admin-pannel/admin-panel/front-end',
      instances: 1,
      autorestart: true,
      watch: false,
      max_memory_restart: '500M',
      env: {
        NODE_ENV: 'production'
      },
      error_file: '/root/admin-pannel/logs/frontend-error.log',
      out_file: '/root/admin-pannel/logs/frontend-out.log',
      time: true
    }
  ]
};
 


 // backend / .env 

 # Server Configuration
PORT=5000
NODE_ENV=development

# Client URL (Frontend)
CLIENT_URL=http://209.208.79.172:8080
# Supabase Configuration

SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpqbXVieGZhbXZva2lrcWpreHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1NjY3NDgsImV4cCI6MjA3MzE0Mjc0OH0.n58cGRAHSPIWd0U4_Im-JmhWn0l41n2JLrXeJw2wYOQ
SUPABASE_URL=https://zjmubxfamvokikqjkxyg.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpqbXVieGZhbXZva2lrcWpreHlnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NzU2Njc0OCwiZXhwIjoyMDczMTQyNzQ4fQ.h8u2MqKYnRl-4HKpffDWFkBWO-2XXBFhhSPEsrt-QGw


# Email Configuration (if using nodemailer)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
AdminEmail=lalagggg786@gmail.com
Nodemailer_Google_App_Password=zsenzjmubfubbndk





///forntend / .env
REACT_APP_API_URL=http://209.208.79.172:3000

REACT_APP_API_URL=http://209.208.79.172:5000
REACT_APP_Server_Url=http://209.208.79.172:5000/api



        # REACT_APP_SUPABASE_PUBLISHABLE_KEY=
REACT_APP_SUPABASE_URL_PRODUCTION=https://zjmubxfamvokikqjkxyg.supabase.co
REACT_APP_SUPABASE_ANON_KEY_PRODUCTION=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpqbXVieGZhbXZva2lrcWpreHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1NjY3NDgsImV4cCI6MjA3MzE0Mjc0OH0.n58cGRAHSPIWd0U4_Im-JmhWn0l41n2JLrXeJw2wYOQ
REACT_APP_SUPABASE_SERVICE_ROLE_KEY_PRODUCTION=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpqbXVieGZhbXZva2lrcWpreHlnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NzU2Njc0OCwiZXhwIjoyMDczMTQyNzQ4fQ.h8u2MqKYnRl-4HKpffDWFkBWO-2XXBFhhSPEsrt-QGw

REACT_APP_SUPABASE_URL_ISMAIL=https://zjmubxfamvokikqjkxyg.supabase.co
REACT_APP_SUPABASE_ANON_KEY_ISMAIL=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpqbXVieGZhbXZva2lrcWpreHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1NjY3NDgsImV4cCI6MjA3MzE0Mjc0OH0.n58cGRAHSPIWd0U4_Im-JmhWn0l41n2JLrXeJw2wYOQ
REACT_APP_SUPABASE_SERVICE_ROLE_KEY_ISMAIL=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpqbXVieGZhbXZva2lrcWpreHlnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NzU2Njc0OCwiZXhwIjoyMDczMTQyNzQ4fQ.h8u2MqKYnRl-4HKpffDWFkBWO-2XXBFhhSPEsrt-QGw


#  --Redis URl
REDIS_URL=rediss://default:ASmRAAIncDIyNjk5ZDc0ZGYwZTI0YjU4OTNmYWY4M2EyMGZjMDBiZXAyMTA2NDE@hardy-ewe-10641.upstash.io:6379


#  --Nodemailer configration of Mail
AdminEmail=lalagggg786@gmail.com
Nodemailer_Google_App_Password=zsenzjmubfubbndk
MAIL_FROM_ADDRESS=ismailabbasinpol@gmail.com




// nginx.conf


server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/javascript application/json;

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # Handle React Router
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Cache static assets
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Disable cache for index.html
    location = /index.html {
        add_header Cache-Control "no-cache, no-store, must-revalidate";
        expires 0;
    }

    # Error pages
    error_page 404 /index.html;
}
